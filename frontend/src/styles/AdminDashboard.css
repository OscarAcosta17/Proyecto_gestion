:root {
  --bg-dark: #050505;       /* Fondo casi negro */
  --bg-panel: #101010;      /* Paneles */
  --bg-card: #161616;       /* Tarjetas */
  
  --neon-blue: #00f3ff;     /* Cyan Cyberpunk */
  --neon-green: #0aff60;    /* Verde Tóxico */
  --neon-red: #ff003c;      /* Rojo Alarma */
  --neon-purple: #bc13fe;   /* Morado Neón */
  
  --glass: rgba(255, 255, 255, 0.03);
  --border: rgba(255, 255, 255, 0.1);
  --shadow-glow: 0 0 20px rgba(0, 243, 255, 0.15);
}

/* RESET */
* { box-sizing: border-box; outline: none; }

.admin-layout {
  min-height: 100vh;
  background-color: var(--bg-dark);
  color: #fff;
  font-family: 'Inter', sans-serif;
  background-image: 
    radial-gradient(circle at 15% 50%, rgba(41, 121, 255, 0.05), transparent 25%),
    radial-gradient(circle at 85% 30%, rgba(188, 19, 254, 0.05), transparent 25%);
}

/* --- ANIMACIONES --- */
@keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes pulseGlow { 0% { box-shadow: 0 0 5px var(--neon-blue); } 50% { box-shadow: 0 0 20px var(--neon-blue); } 100% { box-shadow: 0 0 5px var(--neon-blue); } }

.fade-in { animation: slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

/* --- HEADER --- */
.admin-header {
  height: 80px;
  background: rgba(16, 16, 16, 0.8);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--border);
  display: flex; justify-content: space-between; align-items: center;
  padding: 0 40px;
  position: sticky; top: 0; z-index: 50;
}

.header-title h1 { 
  margin: 0; font-size: 1.5rem; font-weight: 800; letter-spacing: 2px; 
  text-transform: uppercase;
  background: linear-gradient(90deg, #fff, #888);
  background-clip: text;
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

.btn-new-announce {
  background: #5f279a; color: white; border: none;
  
  padding: 10px 20px; border-radius: 4px; font-weight: 700; cursor: pointer;
  box-shadow: 0 0 10px rgba(44, 1, 60, 0.4); transition: 0.3s;
}
.btn-new-announce:hover { box-shadow: 0 0 20px rgba(111, 13, 150, 0.6); transform: translateY(-2px); }

.btn-exit {
  background: transparent; border: 1px solid #444; color: #aaa;
  padding: 10px 20px; border-radius: 4px; cursor: pointer; transition: 0.3s; margin-left: 10px;
}
.btn-exit:hover { border-color: var(--neon-red); color: var(--neon-red); }

/* --- CONTENEDOR CENTRAL (SIN SIDEBAR) --- */
.admin-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 40px;
  width: 100%;
}

/* --- KPI CARDS --- */
.kpi-grid {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 25px; margin-bottom: 40px;
}

.kpi-card {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  padding: 25px; border-radius: 12px;
  position: relative; overflow: hidden;
  transition: transform 0.3s, border-color 0.3s;
}
.kpi-card:hover { transform: translateY(-5px); border-color: #444; }

/* Barras de neón decorativas */
.kpi-card::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 2px; background: currentColor; opacity: 0.8; }
.kpi-card.blue { color: var(--neon-blue); }
.kpi-card.green { color: var(--neon-green); }
.kpi-card.yellow { color: var(--neon-yellow); cursor: pointer; }
.kpi-card.red { color: var(--neon-red); }

.kpi-label { color: #888; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; display: block; margin-bottom: 10px; }
.kpi-number { color: white; font-size: 2.5rem; font-weight: 700; line-height: 1; }

/* --- PANEL PRINCIPAL ESTILO "NAVEGADOR" --- */
.main-panel {
  background: var(--bg-panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.5);
  overflow: hidden;
  min-height: 600px;
  display: flex; flex-direction: column;
}

/* Header de Pestañas */
.panel-tabs {
  background: #0a0a0a;
  border-bottom: 1px solid var(--border);
  display: flex; padding: 0 20px; gap: 5px; align-items: flex-end; height: 60px;
}

.tab-btn {
  background: transparent; border: none; color: #666;
  padding: 0 25px; height: 45px; cursor: pointer;
  font-size: 0.95rem; font-weight: 600;
  border-radius: 8px 8px 0 0;
  transition: 0.3s; position: relative;
}
.tab-btn:hover { color: #ccc; background: rgba(255,255,255,0.02); }

.tab-btn.active {
  background: var(--bg-panel); /* Se fusiona con el panel */
  color: white;
  box-shadow: 0 -5px 15px rgba(0,0,0,0.2);
}

/* Contenido del Panel */
.panel-content { padding: 30px; flex: 1; }

/* Toolbar (Filtros) */
.toolbar {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid var(--border);
}
.toolbar h2 { margin: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; }

.search-input {
  background: #050505; border: 1px solid #333; color: white;
  padding: 10px 20px; border-radius: 30px; width: 300px;
  transition: 0.3s;
}
.search-input:focus { border-color: var(--neon-blue); box-shadow: 0 0 15px rgba(0, 243, 255, 0.1); }

/* --- DISEÑO MEJORADO DE TICKETS (ESTILO CYBER) --- */
.tickets-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 20px;
}

.ticket-card {
  background: linear-gradient(145deg, #181818, #121212);
  border: 1px solid #333;
  border-radius: 10px;
  padding: 20px;
  display: flex; flex-direction: column;
  transition: all 0.3s ease;
  position: relative;
}

.ticket-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.5);
  border-color: #555;
}

/* Indicador lateral de estado */
.ticket-card.open { border-left: 4px solid var(--neon-red); }
.ticket-card.closed { border-left: 4px solid var(--neon-green); opacity: 0.7; }

/* Header del Ticket */
.ticket-header {
  display: flex; justify-content: space-between; align-items: flex-start;
  margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.05);
}
.user-info h4 { margin: 0; font-size: 0.95rem; color: white; }
.user-info span { font-size: 0.8rem; color: #666; }

.status-badge {
  padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 800; text-transform: uppercase;
}
.status-badge.open { background: rgba(255, 0, 60, 0.15); color: var(--neon-red); border: 1px solid var(--neon-red); }
.status-badge.closed { background: rgba(10, 255, 96, 0.15); color: var(--neon-green); border: 1px solid var(--neon-green); }

/* Cuerpo del Ticket */
.ticket-issue { font-size: 1rem; color: var(--neon-blue); margin-bottom: 10px; display: block; }
.ticket-body {
  background: rgba(0,0,0,0.3); padding: 15px; border-radius: 6px;
  color: #ccc; font-size: 0.9rem; font-style: italic; line-height: 1.5;
  margin-bottom: 20px; flex: 1; border: 1px solid #222;
}

/* Botón de Acción */
.btn-action {
  width: 100%;
  background: transparent;
  border: 1px solid var(--neon-blue); color: var(--neon-blue);
  padding: 10px; border-radius: 6px; font-weight: 700; cursor: pointer;
  transition: 0.3s; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px;
}
.btn-action:hover {
  background: var(--neon-blue); color: #000;
  box-shadow: 0 0 15px rgba(0, 243, 255, 0.4);
}

/* --- TABLAS (Usuarios/Productos) --- */
.cyber-table { width: 100%; border-collapse: separate; border-spacing: 0 5px; }
.cyber-table th { text-align: left; padding: 15px; color: #666; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
.cyber-table tr { background: #141414; transition: 0.2s; }
.cyber-table tr:hover { background: #1a1a1a; transform: scale(1.005); }
.cyber-table td { padding: 15px; border-top: 1px solid #222; border-bottom: 1px solid #222; color: #ddd; }
.cyber-table td:first-child { border-left: 1px solid #222; border-top-left-radius: 6px; border-bottom-left-radius: 6px; }
.cyber-table td:last-child { border-right: 1px solid #222; border-top-right-radius: 6px; border-bottom-right-radius: 6px; }

/* MODAL */
.modal-overlay {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.9); backdrop-filter: blur(5px);
  display: flex; justify-content: center; align-items: center; z-index: 100;
  animation: slideUp 0.3s;
}
.modal-box {
  background: #111; width: 600px; padding: 30px; border-radius: 12px;
  border: 1px solid #333; box-shadow: 0 0 50px rgba(0,0,0,0.8);
}
.modal-textarea {
  width: 100%; background: #050505; border: 1px solid #333; color: white;
  padding: 15px; border-radius: 8px; margin: 15px 0; font-family: inherit;
}
.modal-textarea:focus { border-color: var(--neon-blue); }

/* ... (Mantén tus variables :root y estilos generales del layout anteriores) ... */

/* --- BARRA DE HERRAMIENTAS INTERNA (FILTROS) --- */
.toolbar {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 25px; padding: 15px; 
  background: rgba(255, 255, 255, 0.03); /* Fondo sutil */
  border-radius: 8px; border: 1px solid var(--border);
}

.filter-group { display: flex; gap: 10px; align-items: center; }

/* Botones de Filtro (Pills) */
.filter-pill {
  background: transparent; border: 1px solid #444; color: #888;
  padding: 6px 16px; border-radius: 20px; cursor: pointer;
  font-size: 0.85rem; font-weight: 600; transition: 0.3s;
  display: flex; align-items: center; gap: 6px;
}
.filter-pill:hover { border-color: #666; color: white; }

.filter-pill.active {
  background: rgba(41, 121, 255, 0.1); 
  border-color: var(--neon-blue); 
  color: var(--neon-blue);
  box-shadow: 0 0 10px rgba(41, 121, 255, 0.1);
}

.search-input {
  background: #050505; border: 1px solid #333; color: white;
  padding: 8px 15px; border-radius: 20px; width: 250px; outline: none;
  transition: 0.3s;
}
.search-input:focus { border-color: var(--neon-blue); width: 280px; }

/* --- TABLA DE USUARIOS (Recuperada y Mejorada) --- */
.cyber-table { width: 100%; border-collapse: separate; border-spacing: 0 5px; }
.cyber-table th { 
  text-align: left; padding: 15px; color: #666; font-size: 0.75rem; 
  text-transform: uppercase; letter-spacing: 1px; font-weight: 700;
}
.cyber-table tr { background: #141414; transition: 0.2s; }
.cyber-table tr:hover { background: #1a1a1a; transform: scale(1.002); }

.cyber-table td { padding: 15px; border-top: 1px solid #222; border-bottom: 1px solid #222; vertical-align: middle; color: #ddd; }
.cyber-table td:first-child { border-left: 1px solid #222; border-top-left-radius: 6px; border-bottom-left-radius: 6px; }
.cyber-table td:last-child { border-right: 1px solid #222; border-top-right-radius: 6px; border-bottom-right-radius: 6px; }

/* Badges de la Tabla */
.role-badge { 
  padding: 4px 10px; border-radius: 4px; font-size: 0.7rem; font-weight: 800; text-transform: uppercase; border: 1px solid transparent; 
}
.role-badge.admin { color: #e7fc2c; border-color: var(--neon-yellow);  }
.role-badge.client { color: #888; border-color: #444; }

.status-dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 6px; }
.status-active { background: var(--neon-green); box-shadow: 0 0 5px var(--neon-green); }
.status-inactive { background: var(--neon-red); }

/* --- DISEÑO FOLDER TABS (Modo "Full Width" / Bloque Completo) --- */
.folder-tabs-container {
  display: flex;
  width: 100%; /* Ocupa todo el ancho */
  align-items: flex-end;
  border-bottom: 1px solid var(--border);
  margin-bottom: 25px;
}

.folder-tab {
  flex: 1; /* CLAVE: Hace que cada pestaña crezca para llenar el espacio equitativamente */
  background: #080808; 
  border: 1px solid #333; 
  border-bottom: none;
  color: #666; 
  padding: 15px 10px; /* Más alto para mejor clic */
  cursor: pointer;
  font-size: 0.95rem; 
  font-weight: 600;
  text-align: center; /* Texto centrado */
  
  /* Redondeo superior estilo carpeta */
  border-top-left-radius: 12px; 
  border-top-right-radius: 12px;
  
  position: relative; 
  bottom: -1px; 
  margin: 0 2px; /* Pequeña separación entre ellas */
  transition: all 0.2s ease;
}

.folder-tab:hover {
  background: #111;
  color: #ccc;
}

.folder-tab.active {
  background: var(--bg-panel); /* Se funde con el contenido */
  color: white; 
  border-color: #333;
  border-bottom: 1px solid var(--bg-panel); /* Borra la línea de abajo */
  z-index: 5; 
  padding-bottom: 16px; /* Compensa visualmente */
}

/* Colores de las pestañas activas */
.folder-tab.tab-pending.active { color: var(--neon-red); border-top: 3px solid var(--neon-red); }
.folder-tab.tab-resolved.active { color: var(--neon-green); border-top: 3px solid var(--neon-green); }
.folder-tab.tab-all.active { color: var(--neon-blue); border-top: 3px solid var(--neon-blue); }


/* --- TOOLBAR & BUSCADOR --- */
.toolbar-search-container {
  display: flex; 
  justify-content: flex-end; /* Alinea a la derecha */
  margin-bottom: 20px;
  padding: 0 10px;
}

.search-input-large {
  background: #050505; 
  border: 2px solid #333; 
  color: white;
  padding: 12px 20px; 
  border-radius: 15px; 
  width: 100%; 
  max-width: 800px; /* Ancho máximo aumentado considerablemente */
  font-size: 0.95rem;
  outline: none; 
  transition: 0.3s;

  display: block;   /* Asegura que tome el renglón propio si es necesario */
  margin: 0 auto;
}
.search-input-large:focus { 
  border-color: var(--neon-blue); 
  box-shadow: 0 0 15px rgba(41, 121, 255, 0.15); 
}

/* =========================================
   RESPONSIVE DESIGN (MÓVILES Y TABLETS)
   ========================================= */

@media (max-width: 900px) {
  /* ... (Mantén el bloque de 900px igual que antes) ... */
  .admin-container { padding: 15px; }
  .admin-header { height: auto; flex-direction: column; gap: 15px; padding: 20px; text-align: center; }
  .admin-header > div:last-child { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; }
  .panel-tabs { height: auto; flex-wrap: wrap; }
  .tab-btn { flex: 1; padding: 12px 10px; font-size: 0.8rem; text-align: center; border-radius: 8px; border-bottom: 1px solid var(--border); margin-bottom: 5px; }
  .tab-btn.active { border-bottom: 1px solid var(--neon-blue); }
  .tab-btn.active::after { display: none; }
  .panel-content { padding: 15px; overflow-x: hidden; }
}

@media (max-width: 768px) {
  /* 5. KPI Grid (AQUÍ ESTÁ EL CAMBIO: 2x2) */
  .kpi-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2 columnas */
    gap: 10px; /* Espacio más pequeño entre tarjetas */
  }

  .kpi-card {
    padding: 15px; /* Menos relleno interno */
    min-height: 120px; /* Altura mínima para uniformidad */
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  
  .kpi-label {
    font-size: 0.65rem; /* Etiqueta más pequeña */
    white-space: nowrap; /* Evita que el texto se parta feo */
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .kpi-number {
    font-size: 1.6rem; /* Número ajustado para que quepa */
  }
  
  .kpi-subtext {
      font-size: 0.7rem; /* Texto de porcentaje más chico */
  }

  /* 6. Folder Tabs */
  .folder-tabs-container { flex-wrap: wrap; }
  .folder-tab { padding: 10px 5px; font-size: 0.8rem; min-width: 30%; } /* Ajuste para que quepan 3 */

  /* 7. Buscador */
  .toolbar-search-container { padding: 0; margin-top: 15px; }
  .search-input-large { width: 100%; max-width: none; font-size: 0.9rem; }

  /* 8. Tablas Scrollables */
  .cyber-table { display: block; overflow-x: auto; white-space: nowrap; }
  .cyber-table th, .cyber-table td { padding: 10px; font-size: 0.8rem; }

  /* 9. Tickets Grid */
  .tickets-grid { grid-template-columns: 1fr; } /* Tickets sí se quedan en 1 columna para leer bien */
  
  /* 10. Modales */
  .modal-box { width: 95% !important; padding: 20px; max-height: 85vh; overflow-y: auto; }
  .modal-overlay { align-items: flex-end; padding-bottom: 20px; }
}